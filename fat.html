<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAZE INTERNATIONAL LGBTQIA FILM FESTIVAL</title>
    <meta name="description" content="Join the GAZE INTERNATIONAL LGBTQIA FILM FESTIVAL for a celebration of queer cinema.">
    <link rel="icon" href="path/to/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://use.typekit.net/opq3sul.css">
    <link rel="stylesheet" href="https://use.typekit.net/kyu3tgb.css">
    <link rel="stylesheet" href="styles.css">
    <!-- Add Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXX-Y"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-XXXXX-Y');
    </script>
</head>
<body>
    <!-- SKIP TO CONTENT -->
    <a href="#maincontent" role="link" tabindex="0" class="skip-link">GAZE International L G B T Q I A Film Festival Home Page, press enter to skip to main content or press tab to continue.</a>
    <!-- Main Title -->
    <header tabindex="0" aria-label="Home Button" class="firstpage">
        <a href="index.html" style="display: inline-block; cursor: pointer;">
            <img class="mobilehide" src="img/title.gif">
            <img class="desktophide" src="img/title.gif">
        </a>
    </header>
    <!-- BUTTON TOGGLE MENU -->
    <button class="menu-toggle" class="pageone" tabindex="0" aria-haspopup="true" aria-expanded="false" aria-label="The main menu is now open, press tab to navigate"></button>
    <!-- Menu -->
    <nav>
        <ul>
            <li class="dropdown" tabindex="0" aria-label="Main Menu Header, About">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">About</a>
                <ul class="dropdown-content">
                    <li tabindex="0" aria-label=" Who are we?" role="button"><a href="whoarewe.html">Who am I?</a></li>
                    <li tabindex="0" aria-label=" Who are we?" role="button"><a href="mailto:patfeeney1098@gmail.com">Contact Me</a></li>
                </ul>
            </li>
            <li class="dropdown" tabindex="0" aria-label="main menu, Programme of events">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">Digital</a>
                <ul class="dropdown-content">
                    <li tabindex="0" aria-label=" view Films showing on Sunday the 5th of August" role="button"><a href="index.html">Alan Turing Institute</a></li>
                    <li tabindex="0" aria-label=" view Films showing on Thursday the 2nd of August" role="button"><a href="fat.html">Fat Of The Land</a></li>
                </ul>
            </li>
            <li class="dropdown" tabindex="0" aria-label="main menu, Programme of events">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">Print</a>
                <ul class="dropdown-content">
                    <li tabindex="0" aria-label=" View timetable" role="button"><a href="Timetable.html">GAZE Film Fest</a></li>
                    <li tabindex="0" aria-label=" view Films showing on Thursday the 2nd of August" role="button"><a href="Thursday.html">CATU</a></li>
                </ul>
            </li>        
            <li class="dropdown" tabindex="0" aria-label="main menu, Programme of events">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">Experience</a>
                <ul class="dropdown-content">
                    <li tabindex="0" aria-label=" view Films showing on Friday the 3rd of August" role="button"><a href="index.html">Trust Fall</a></li>
                    <li tabindex="0" aria-label=" view Films showing on Saturday the 4th of August" role="button"><a href="index.html">Political Material</a></li>
                </ul>
            </li>   
        </ul>
    </nav>
    <!-- Main Body -->
    <main id="maincontent">

        <section class="fat" aria-label="A distorted, image of a person in a striped shirt with wet hair and a blue tongue.">
        </section>

    </main>

    <article>
        <h4>Fat Of The Land</h4>
        <p>Inspired by design from the late 90's and early 00's, 'Fat Of The Land' is a video game reflecting on the ground breaking 
            album The Fat Of The Land by the Prodigy. A dance album through and through, I wanted to create an experience to mimic the 
            feeling of a night out in a fictional city. With grime and atmosphere to boot. Each room is anchored by a map which leads 
            the player around the experience. Inside each venue there is a hidden disk which the players must discover. Upon finding each
             disk it will appear in their home page available as a custom album design to purchase. The best way to experience the game 
             is to play through yourself! 

            I was influenced by retro RPG design, as well as the indie game 'Sewer Rave'
            in which you explore a selection of rooms with dancing rats. The most important aspect of these research sources are their ability
             to foster atmosphere. 
            <br><br>
            
            
                
            Especially when engaging with artistic medium, nostalgia and atmosphere become the primary driver of emotive 
            connections. With this in mind, I wanted something to tap into the nostalgic memories of the audience. 
            
            I also explored the website 'Poolsuite' which emulates a 90's desktop and is centred around music exploration, again
             deeply nostalgic. The video game ROM uses a map as the core structure of the design, this was effective because it 
             anchors the audience in a space, and makes them feel as if they have agency. It became clear early on that a functioning 
             and open map was vital for the success of any design. I was also inspired by the Daniel Stettner archive on are.na which
              showcased retro video game design from that period, this archive helped influence my final CD designs.</p>
            <br><br><br><br>
    </article>
    <!-- Footer -->
    <footer>
        <div class="social-icons">
            <a href="https://www.instagram.com/gazefilmfest/" target="_blank" aria-label="Instagram" role="link">
                <img src="img/instagram-icon.png" alt="Link to Instagram page" tabindex="0">
            </a>
            <a href="mailto:patfeeney1098@gmail.com" target="_blank" aria-label="Email" role="link">
                <img src="img/email.png" alt="Email Me" tabindex="0">
            </a>
        </div>
        <div class="footer-text">
            &copy; Patrick Feeney Design 2024 | All rights reserved
        </div>
    </footer>
   <script>
    
    document.addEventListener('DOMContentLoaded', function() {
    const nav = document.querySelector('nav, nav.li');
    const toggleButton = document.querySelector('.menu-toggle');
    const dropdowns = document.querySelectorAll('.dropdown');
    const cursor = createCustomCursor();

    if (window.matchMedia("(min-width: 768px)").matches) {
        const cursor = createCustomCursor();
        setupCustomCursor(cursor);
        setupDropdowns(dropdowns);
        setupMenuToggle(document.querySelector('.menu-toggle'), document.querySelector('nav'));
    }
    setupDropdownZZ(dropdowns);
    setupAccessibility();
    initializeParallaxEffects();

});

function createCustomCursor() {
    const cursor = document.createElement('div');
    cursor.classList.add('custom-cursor');
    document.body.appendChild(cursor);
    return cursor;
}

function setupCustomCursor(cursor) {
    document.addEventListener('mousemove', (e) => {
        cursor.style.left = `${e.clientX}px`;
        cursor.style.top = `${e.clientY}px`;
    });

    document.querySelectorAll('a, button, input').forEach(element => {
        element.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
        element.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
    });
}

// NAV FOCUS SETUP
function setupFocusWithinNav(nav) {
    const focusableElements = nav.querySelectorAll('a, button, li, input'); // Extend this selector to include other focusable elements if needed
    focusableElements.forEach(element => {
        element.addEventListener('focus', openMenu);
    });
}

function setupMenuToggle(toggleButton, nav) {
    let closeMenuTimeout;

    // Function to open the menu
    function openMenu() {
        clearTimeout(closeMenuTimeout); // Clear any pending close command
        nav.style.left = '0vw';
        nav.style.opacity = '1';
        toggleButton.setAttribute('aria-expanded', 'true');
        toggleButton.classList.add('expanded');
    }

    // Function to close the menu
    function closeMenu() {
        clearTimeout(closeMenuTimeout); // Clear any pending open command to prevent conflicts
        closeMenuTimeout = setTimeout(() => {
            nav.style.left = '-20vw';
            nav.style.opacity = '0';
            toggleButton.setAttribute('aria-expanded', 'false');
            toggleButton.classList.remove('expanded');
        }, 1500); // Correct delay to 2000 milliseconds
    }

    // Toggle menu on click
     // toggleButton.addEventListener('click', function() {
     //    let isOpen = toggleButton.getAttribute('aria-expanded') === 'true';
     //    if (isOpen) {
     //        closeMenu();
     //    } else {
     //        openMenu();
     //    }
     // });

    // Open menu on focus
    toggleButton.addEventListener('focus', openMenu);

    // Hover events
    toggleButton.addEventListener('mouseenter', openMenu);
    // Only close the menu when leaving both button and nav area
    toggleButton.addEventListener('mouseleave', function(event) {
        if (!nav.contains(event.relatedTarget)) {
            closeMenu();
        }
    });
    nav.addEventListener('mouseleave', function(event) {
        if (!toggleButton.contains(event.relatedTarget)) {
            closeMenu();
        }
    });

    // Ensure keyboard accessibility
    toggleButton.addEventListener('keydown', function(event) {
        if (event.key === 'Enter' || event.key === ' ') {
            event.preventDefault(); // Stop default action
            toggleButton.click(); // Simulate click for keyboard
        }
    });
}

function setupDropdowns(dropdowns) {
    dropdowns.forEach(dropdown => {
        const mainLink = dropdown.querySelector('a:first-child');
        const dropdownContent = dropdown.querySelector('.dropdown-content');
        const dropdownLinks = dropdown.querySelectorAll('li');

        mainLink.addEventListener('click', function(event) {
            event.preventDefault();
            const isExpanded = dropdownContent.style.maxHeight !== '';
            mainLink.setAttribute('aria-expanded', isExpanded ? 'false' : 'true');
            dropdownContent.style.maxHeight = isExpanded ? '' : dropdownContent.scrollHeight + 'px';
        });

        document.addEventListener('click', function(event) {
            if (!dropdown.contains(event.target)) {
                mainLink.setAttribute('aria-expanded', 'false');
                dropdownContent.style.maxHeight = '';
            }
        });

        // Adding key press event for dropdown items
        dropdownLinks.forEach(item => {
            item.addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    const link = item.querySelector('a');
                    if (link) {
                        link.click();
                    }
                }
            });
        });
        
    });
}


// MOBILE
function setupDropdownZZ(dropdowns) {
    dropdowns.forEach(dropdown => {
        const mainLink = dropdown.querySelector('a:first-child');
        const dropdownContent = dropdown.querySelector('.dropdown-content');

        mainLink.addEventListener('click', function(event) {
            if (window.innerWidth <= 768) {
                event.preventDefault(); // Prevent navigation
                const isExpanded = dropdownContent.style.maxHeight !== '';
                mainLink.setAttribute('aria-expanded', isExpanded ? 'false' : 'true');
                dropdownContent.style.maxHeight = isExpanded ? '' : dropdownContent.scrollHeight + 'px';
            }
        });

        // Clicking outside to close dropdown
        document.addEventListener('click', function(event) {
            if (!dropdown.contains(event.target)) {
                mainLink.setAttribute('aria-expanded', 'false');
                dropdownContent.style.maxHeight = '';
            }
        });
    });
}

function setupAccessibility() {
    // Enhance accessibility for keyboard navigation
    document.querySelector('header').addEventListener('keydown', (event) => {
        if (event.key === "Enter" || event.keyCode === 13) {
            const link = event.target.querySelector('a');
            if (link) {
                link.click();
            }
        }
    });
}

function initializeParallaxEffects() {
    if (window.innerWidth > 768) {
        applyParallaxEffect();
    }
    window.addEventListener('resize', () => {
        if (window.innerWidth > 768) {
            applyParallaxEffect();
        } else {
            resetParallaxEffect();
        }
    });
}

function applyParallaxEffect() {
    document.addEventListener('scroll', () => {
        const backgrounds = [
            { element: document.querySelector('.backgroundimg'), startScroll: 100 },
            { element: document.querySelector('.animate'), startScroll: 0 },
            { element: document.querySelector('.backgroundimg2'), startScroll: 700 },
            { element: document.querySelector('.backgroundimg3'), startScroll: 2000 }
        ];

        backgrounds.forEach(bg => {
            if (bg.element) {
                const scrollPosition = window.pageYOffset;
                const scale = scrollPosition > bg.startScroll ? 1 + (scrollPosition - bg.startScroll) * 0.0001 : 1;
                bg.element.style.transform = `scale(${scale})`;
            }
        });
    });
}

function resetParallaxEffect() {
    const backgrounds = [document.querySelector('.backgroundimg'), document.querySelector('.animate'), document.querySelector('.backgroundimg2'), document.querySelector('.backgroundimg3')];
    backgrounds.forEach(bg => {
        if (bg) {
            bg.style.transform = 'scale(1)';
        }
    });
}
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5BRPD33P');</script>
<!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAZE International LGBTQIA Film Festival</title>
    <meta name="description" content="Join the GAZE INTERNATIONAL LGBTQIA FILM FESTIVAL for a celebration of queer cinema.">
    <link rel="icon" href="path/to/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://use.typekit.net/opq3sul.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="favicon.svg" />
<link rel="shortcut icon" href="favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
<link rel="manifest" href="site.webmanifest" />
    <!-- Add Google Analytics -->
    <style>
        /* ===== Dynamic film listings (bespoke sf- classes) ===== */
body {
    background-color: #fff;
}
#sf-listing {
  padding: 0;
}

.sf-film-item {
  display: grid;
  grid-template-columns: minmax(260px, 60vw) 1fr;
  gap: 1.5rem;
  max-width: 100vw;
  margin: 0;
}

.sf-film-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.sf-film-info {
  padding: 3vw 3.5vw 2vw 2vw;
}

.sf-film-title {
  font-size: 4vw;
    padding: 0;
    color: #222;
background-color: #fff;
  font-weight: 600;
  line-height: 1;
}

.sf-film-meta {
  font-weight: 500;
  font-size: 1vw;
  margin-bottom: 1rem;
}

.sf-film-meta-primary {
  display: block;
  font-size: 1.2em;
  margin-top: 0.5vw;
  font-weight: 600;
}

.sf-film-meta-secondary {
  font-size: 1em;
  opacity: .85;
}

.sf-film-desc {
  margin-bottom: 1rem;
    margin-top: 2vw;
}

.sf-film-credits {
  font-size: .9rem;
  color: var(--meta);
  margin-bottom: 1.5rem;
}

.sf-film-button {
  display: inline-block;
  background-color: #222;
  color: #fff;
  padding: .65rem 1.25rem;
  text-decoration: none;
  font-weight: 600;
  margin-bottom: 4vw;
  margin-top: 1vw;
}
.sf-film-button:hover {
  background-color: var(--accent);
  color: black;
    background-color: #ffaea3;
}

/* ---- Mobile adjustments ---- */
@media (max-width: 768px) {
  .sf-film-item {
    display: flex;
    flex-direction: column;
  }
  .sf-film-image {
    height: auto;
  }
  .sf-film-info {
    padding: 6vw 8vw 10vw;
  }
  .sf-film-title {
    font-size: 8vw;
    margin: 1rem 0 .5rem;
  }
  .sf-film-meta {
    font-size: 3.5vw;
    margin-bottom: 1rem;
  }
    .sf-film-button {margin-bottom: 8vw;}

}


    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5BRPD33P"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <!-- SKIP TO CONTENT -->
    <a href="#maincontent" role="link" tabindex="0" class="skip-link">Volunteer. Press enter to skip to page content, or press tab to navigate menu</a>
    <!-- Main Title -->
    <header tabindex="0" aria-label="Home Button">
        <a href="index.html" style="display: inline-block; cursor: pointer;">
            <img src="img/gaze_logo.png">
        </a>
    </header>
    <!-- BUTTON TOGGLE MENU -->
    <button class="menu-toggle" tabindex="0" aria-haspopup="true" aria-expanded="false" aria-label="The main menu is now open, press tab to navigate"></button>
    <!-- Menu -->
    <nav>
        <ul>
            <li class="dropdown" tabindex="0" aria-label="Main Menu Header, About">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">ABOUT</a>
                <ul class="dropdown-content">
                    <!--
                    <li tabindex="0" aria-label=" Who are we?" role="button"><a href="whoarewe.html">Who Are We?</a></li>
                    <li tabindex="0" aria-label=" Director's Welcome message" role="button"><a href="Directors_Welcome.html">Director's Welcome</a></li>
                    <li tabindex="0" aria-label=" Manager's Welcome message" role="button"><a href="chair.html">Chair's Welcome</a></li>
                    -->
                    <li tabindex="0" aria-label=" View past programmes" role="button"><a href="archive.html">Archive</a></li>
                    <li tabindex="0" aria-label=" Submit via Film Freeway" role="button"><a href="https://filmfreeway.com/gaze-ireland">Submit A Film</a></li>

                </ul>
            </li>
            <li class="dropdown" tabindex="0" aria-label="Menu Section, Tickets">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">TICKETS</a>
                <ul class="dropdown-content">
                    <li tabindex="0" aria-label=" Festival Pass" role="button"><a href="themes.html">Festival Line Up</a></li>
                     <li tabindex="0" aria-label=" Festival Pass" role="button"><a href="https://events.ticketbooth.eu/event/gaze-festival-pass-2025" target="_blank">Festival Pass</a></li>
                    <li tabindex="0" aria-label="Featured Events" role="button"><a href="featured.html">Featured Events</a></li>
                    <li tabindex="0" aria-label="Timetable" role="button"><a href="timetable.html">Timetable</a></li>
                    <!--
                    <li tabindex="0" aria-label=" View timetable" role="button"><a href="Timetable.html">Timetable</a></li>
                    <li tabindex="0" aria-label="Best Judys" role="button"><a href="judy.html">Best Judys</a></li>
                    <li tabindex="0" aria-label="IFI @ Home" role="button"><a href="ifi.html">IFI @ Home</a></li>
                    -->
                </ul>
            </li>
            <!--
            <li class="dropdown" tabindex="0" aria-label="main menu, Programme of events">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">PROGRAMME</a>
                <ul class="dropdown-content">
                    <li tabindex="0" aria-label=" view Films showing on Thursday the 1st of August" role="button"><a href="thurs.html">Thursday 1st August 2024</a></li>
                    <li tabindex="0" aria-label=" view Films showing on Friday the 2nd of August" role="button"><a href="fri.html">Friday 2nd August 2024</a></li>
                    <li tabindex="0" aria-label=" view Films showing on Saturday the 3rd of August" role="button"><a href="sat.html">Saturday 3rd August 2024</a></li>
                    <li tabindex="0" aria-label=" view Films showing on Sunday the 4th of August" role="button"><a href="sun.html">Sunday 4th August 2024</a></li>
                    <li tabindex="0" aria-label=" view Films showing on Monday the 5th of August" role="button"><a href="mon.html">Monday 5th August 2024</a></li>
                </ul>
            </li>
            -->
            <li class="dropdown" tabindex="0" aria-label="Main Menu Header, Support">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">SUPPORT</a>
                <ul class="dropdown-content">
                    <li tabindex="0" aria-label=" Subscribe to newsletter" role="button"><a href="https://mailchi.mp/gaze/gaze-newsletter-sign-up" target="_blank">Subscribe</a></li>
                    <li tabindex="0" aria-label=" Become a Festival Friend" role="button"><a href="friend.html">Festival Friend</a></li>
                    <li tabindex="0" aria-label=" Volunteer With GAZE" role="button"><a href="vol.html">Volunteer</a></li>
                    <li tabindex="0" aria-label=" Star GAZE" role="button"><a href="stargaze.html">StarGAZE</a></li>
                </ul>
            </li>
            <li class="dropdown" tabindex="0" aria-label="Main Menu Header, Support">
                <a href="#" aria-haspopup="true" aria-expanded="false" role="button">ACCESSIBILITY</a>
                <ul class="dropdown-content">
                    <li tabindex="0" aria-label="Video Guide To The Festival" role="button"><a href="https://youtu.be/PHfYZgj4Y2o" target="_blank">Video Guide</a></li>
                    <li tabindex="0" aria-label="Easy Read Guide To The Festival" role="button"><a href="img/archive/GAZE Easy Read July 2024.pdf" target="_blank">Easy Read Guide</a></li>
                    <li tabindex="0" aria-label="Easy Read Guide To Star Gaze" role="button"><a href="img/archive/starGAZE easy read document (2).pdf">StarGAZE</a></li>
                    <li tabindex="0" aria-label="Easy Read Festival Programme" role="button"><a href="img/archive/GAZE large print programme 2024.pdf">Programme</a></li>
                </ul>
            </li>        
        </ul>
    </nav>

        <div class="quick-nav" aria-label="Section shortcuts">
  <ul>
    <li><a href="timetable.html">Timetable</a></li>
    <li><a href="featured.html">Featured</a></li>
    <li><a href="irish.html">Irish</a></li>
    <li><a href="first.html">First Timers</a></li>
    <li><a href="genre.html">Genre</a></li>
    <li><a href="3x3.html">3x3</a></li>
    <li><a href="animation.html"><span style="color: #fa6755; font-weight: 600;">Animation</span></a></li>
    <li><a href="doc.html">Documentary</a></li>
    <li><a href="intense.html">Intense Connections</a></li>
    <li><a href="messy.html">Messy People</a></li>
  </ul>
</div>
<!-- DYNAMIC CONNTENT -->
<main id="sf-listing">Loading programme…</main>
<div class="desktophide"><br><br><br><br></div>

    <!-- Footer -->
    <footer class="black-background">
        <div class="social-icons">
            <a href="https://www.instagram.com/gazefilmfest/" target="_blank" aria-label="Instagram" role="link">
                <img src="img/instagram-icon.png" alt="Link to Instagram page" tabindex="0">
            </a>
            <a href="https://www.facebook.com/gazefilmfest/" target="_blank" aria-label="Facebook" role="link">
                <img src="img/facebook-app-round-white-icon.png" alt="Link to Facebook page" tabindex="0">
            </a>
            <a href="https://x.com/GAZEfilmfest" target="_blank" aria-label="Twitter" role="link">
                <img src="img/x-social-media-white-icon.png" alt="Link to Twitter page" tabindex="0">
            </a>
            <a href="https://www.tiktok.com/@gazefilmfest?is_from_webapp=1&sender_device=pc" target="_blank" aria-label="Tiktok" role="link">
                <img src="img/tiktok.png" alt="Link to Tiktok page" tabindex="0">
            </a>
        </div>
        <div class="footer-text">
            &copy; GAZE Film Festival 2025 | All rights reserved
        </div>
    </footer>

 <script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const supabaseUrl = 'https://pcqmducomykhcumkchjm.supabase.co';
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBjcW1kdWNvbXlraGN1bWtjaGptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg4NDU4NjcsImV4cCI6MjA2NDQyMTg2N30.esmrg8uQpQQHfuzmYmNwxciv3x2ExRqV03thXVSOC38';
  const supabase    = createClient(supabaseUrl, supabaseKey);

  /* NEW: every programme table you want to merge */
  const tables = ['tuesday','wednesday','thursday','friday','saturday','sunday','monday'];

  /* unchanged helper */
  function ordinal(n) {
    const s = ['th','st','nd','rd'];
    const v = n % 100;
    return n + (s[(v-20)%10] || s[v] || s[0]);
  }

  /* REPLACED ↓↓↓ */
  async function loadFilms() {
    const container = document.getElementById('sf-listing');
    try {
      /* fetch all tables in parallel, keeping only “Featured Event” rows */
      const results = await Promise.all(
        tables.map(t =>
          supabase
            .from(t)
            .select('*')
            .eq('strand', 'Animation')      // <-- new column filter
        )
      );

      /* surface any query error immediately */
      const firstError = results.find(r => r.error)?.error;
      if (firstError) throw firstError;

      /* flatten the successful data arrays */
      const films = results.flatMap(r => r.data ?? []);

      if (!films.length) {
        container.textContent = 'Programme coming soon.';
        return;
      }

      /* sort: use explicit “order” field if present, else by screening date/time */
      films.sort((a, b) => {
        if (a.order != null && b.order != null) return a.order - b.order;
        return new Date(a.screening_date + ' ' + a.screening_time)
             - new Date(b.screening_date + ' ' + b.screening_time);
      });

      /* build markup exactly as before */
      container.innerHTML = films.map(film => {
        const d = new Date(film.screening_date);
        const weekday = d.toLocaleDateString(undefined, { weekday: 'long' });
        const month   = d.toLocaleDateString(undefined, { month: 'long' });
        const dateStr = `${weekday} ${month} ${ordinal(d.getDate())} ${d.getFullYear()}`;

        const line1 = [dateStr, film.screening_time, film.country ]
                        .filter(Boolean).join(' • ');
        const line2 = [film.length && `${film.length}`,
                       film.venue,
                       film.director && `Dir. ${film.director}`]
                        .filter(Boolean).join(' • ');

        return `
          <div class="sf-film-item">
            <img class="sf-film-image" src="${film.image_url}" alt="${film.title}">
            <div class="sf-film-info">
              <h2 class="sf-film-title">${film.title}</h2>
              <div class="sf-film-meta">
                <span class="sf-film-meta-primary">${line1}</span>
                <span class="sf-film-meta-secondary">${line2}</span>
              </div>
              <p class="sf-film-desc">${film.description || ''}</p>
              <p class="sf-film-credits">
                ${film.writers   ? `Writers: ${film.writers}<br>` : ''}
                ${film.producers ? `Producers: ${film.producers}` : ''}
              </p>
              ${film.ticket_url
                  ? `<a class="sf-film-button" href="${film.ticket_url}" target="_blank" rel="noopener">Book Tickets</a>`
                  : ''}
            </div>
          </div>`;
      }).join('');

    } catch (err) {
      console.error(err);
      container.textContent = 'Sorry, something went wrong.';
    }
  }

  document.addEventListener('DOMContentLoaded', loadFilms);
</script>


   <script>
        
        document.addEventListener('DOMContentLoaded', function() {
    const nav = document.querySelector('nav');
    const toggleButton = document.querySelector('.menu-toggle');
    const dropdowns = document.querySelectorAll('.dropdown');
    const cursor = createCustomCursor();

    if (window.matchMedia("(min-width: 768px)").matches) {
        const cursor = createCustomCursor();
        setupCustomCursor(cursor);
        setupDropdowns(dropdowns);
        setupMenuToggle(document.querySelector('.menu-toggle'), document.querySelector('nav'));
    }
    setupDropdownZZ(dropdowns);
    setupAccessibility();
    initializeParallaxEffects();

});

function createCustomCursor() {
    const cursor = document.createElement('div');
    cursor.classList.add('custom-cursor');
    document.body.appendChild(cursor);
    return cursor;
}

function setupCustomCursor(cursor) {
    document.addEventListener('mousemove', (e) => {
        cursor.style.left = `${e.clientX}px`;
        cursor.style.top = `${e.clientY}px`;
    });

    document.querySelectorAll('a, button, input').forEach(element => {
        element.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
        element.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
    });
}

// NAV FOCUS SETUP
function setupFocusWithinNav(nav) {
    const focusableElements = nav.querySelectorAll('a, button, input'); // Extend this selector to include other focusable elements if needed
    focusableElements.forEach(element => {
        element.addEventListener('focus', openMenu);
    });
}

function setupMenuToggle(toggleButton, nav) {
    let closeMenuTimeout;

    // Function to open the menu
    function openMenu() {
        clearTimeout(closeMenuTimeout); // Clear any pending close command
        nav.style.left = '0vw';
        nav.style.opacity = '1';
        toggleButton.setAttribute('aria-expanded', 'true');
        toggleButton.classList.add('expanded');
    }

    // Function to close the menu
    function closeMenu() {
        clearTimeout(closeMenuTimeout); // Clear any pending open command to prevent conflicts
        closeMenuTimeout = setTimeout(() => {
            nav.style.left = '-20vw';
            nav.style.opacity = '0';
            toggleButton.setAttribute('aria-expanded', 'false');
            toggleButton.classList.remove('expanded');
        }, 2500); // Correct delay to 2000 milliseconds
    }

    // Toggle menu on click
     // toggleButton.addEventListener('click', function() {
     //    let isOpen = toggleButton.getAttribute('aria-expanded') === 'true';
     //    if (isOpen) {
     //        closeMenu();
     //    } else {
     //        openMenu();
     //    }
     // });

    // Open menu on focus
    toggleButton.addEventListener('focus', openMenu);

    // Hover events
    toggleButton.addEventListener('mouseenter', openMenu);
    // Only close the menu when leaving both button and nav area
    toggleButton.addEventListener('mouseleave', function(event) {
        if (!nav.contains(event.relatedTarget)) {
            closeMenu();
        }
    });
    nav.addEventListener('mouseleave', function(event) {
        if (!toggleButton.contains(event.relatedTarget)) {
            closeMenu();
        }
    });

    // Ensure keyboard accessibility
    toggleButton.addEventListener('keydown', function(event) {
        if (event.key === 'Enter' || event.key === ' ') {
            event.preventDefault(); // Stop default action
            toggleButton.click(); // Simulate click for keyboard
        }
    });
}

function setupDropdowns(dropdowns) {
    dropdowns.forEach(dropdown => {
        const mainLink = dropdown.querySelector('a:first-child');
        const dropdownContent = dropdown.querySelector('.dropdown-content');
        const dropdownLinks = dropdown.querySelectorAll('li');

        mainLink.addEventListener('click', function(event) {
            event.preventDefault();
            const isExpanded = dropdownContent.style.maxHeight !== '';
            mainLink.setAttribute('aria-expanded', isExpanded ? 'false' : 'true');
            dropdownContent.style.maxHeight = isExpanded ? '' : dropdownContent.scrollHeight + 'px';
        });

        document.addEventListener('click', function(event) {
            if (!dropdown.contains(event.target)) {
                mainLink.setAttribute('aria-expanded', 'false');
                dropdownContent.style.maxHeight = '';
            }
        });

        // Adding key press event for dropdown items
        dropdownLinks.forEach(item => {
            item.addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    const link = item.querySelector('a');
                    if (link) {
                        link.click();
                    }
                }
            });
        });
        
    });
}


// MOBILE
function setupDropdownZZ(dropdowns) {
    dropdowns.forEach(dropdown => {
        const mainLink = dropdown.querySelector('a:first-child');
        const dropdownContent = dropdown.querySelector('.dropdown-content');

        mainLink.addEventListener('click', function(event) {
            if (window.innerWidth <= 768) {
                event.preventDefault(); // Prevent navigation
                const isExpanded = dropdownContent.style.maxHeight !== '';
                mainLink.setAttribute('aria-expanded', isExpanded ? 'false' : 'true');
                dropdownContent.style.maxHeight = isExpanded ? '' : dropdownContent.scrollHeight + 'px';
            }
        });

        // Clicking outside to close dropdown
        document.addEventListener('click', function(event) {
            if (!dropdown.contains(event.target)) {
                mainLink.setAttribute('aria-expanded', 'false');
                dropdownContent.style.maxHeight = '';
            }
        });
    });
}

function setupAccessibility() {
    // Enhance accessibility for keyboard navigation
    document.querySelector('header').addEventListener('keydown', (event) => {
        if (event.key === "Enter" || event.keyCode === 13) {
            const link = event.target.querySelector('a');
            if (link) {
                link.click();
            }
        }
    });
}

function initializeParallaxEffects() {
    if (window.innerWidth > 768) {
        applyParallaxEffect();
    }
    window.addEventListener('resize', () => {
        if (window.innerWidth > 768) {
            applyParallaxEffect();
        } else {
            resetParallaxEffect();
        }
    });
}

function applyParallaxEffect() {
    document.addEventListener('scroll', () => {
        const backgrounds = [
            { element: document.querySelector('.backgroundimg'), startScroll: 100 },
            { element: document.querySelector('.animate'), startScroll: 0 },
            { element: document.querySelector('.backgroundimg2'), startScroll: 700 },
            { element: document.querySelector('.backgroundimg3'), startScroll: 2000 }
        ];

        backgrounds.forEach(bg => {
            if (bg.element) {
                const scrollPosition = window.pageYOffset;
                const scale = scrollPosition > bg.startScroll ? 1 + (scrollPosition - bg.startScroll) * 0.0001 : 1;
                bg.element.style.transform = `scale(${scale})`;
            }
        });
    });
}

function resetParallaxEffect() {
    const backgrounds = [document.querySelector('.backgroundimg'), document.querySelector('.animate'), document.querySelector('.backgroundimg2'), document.querySelector('.backgroundimg3')];
    backgrounds.forEach(bg => {
        if (bg) {
            bg.style.transform = 'scale(1)';
        }
    });
}
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Patrick Feeney Design</title>
  <meta property="og:title" content="Patrick Feeney Design" />
  <meta property="og:description" content="Integrated Designer" />
  <meta property="og:image" content="https://patrickfeeneydesign.com/img/Slide10.webp" />
  <meta property="og:url" content="https://patrickfeeneydesign.com/" />
  <meta property="og:type" content="website" />
  <link rel="icon" href="img/black_circle.png" type="image/png" />
  <link rel="stylesheet" href="https://use.typekit.net/opq3sul.css" />
  <link rel="stylesheet" href="https://use.typekit.net/kyu3tgb.css" />
  <style>
    html, body {
      overflow-x: hidden;
      touch-action: manipulation;
    }
    header {
      position: fixed;
      text-align: left;
      border-radius: 0 0 40px 40px;
      background-color: #fd86ff;
      right: -9vw;
      top: -0.1vw;
      margin: 0;
      padding: 0;
      z-index: 1000;
    }
    header:hover {
      background-color: #acacac;
    }
    header.firstpage {
      position: fixed;
      text-align: left;
      margin: 0;
      height: 3vw;
      padding-left: 1vw;
      padding-right: 10vw;
      padding-top: 0.8vw;
      padding-bottom: 0.8vw;
      z-index: 4000;
      align-content: center;
    }
    header img {
      height: 1vw;
      width: auto;
      filter: invert(100%);
      padding: 0 0 0 1vw;
      transition: all 0.3s;
    }
    body {
      font-family: tt-commons-pro, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #eeeeee;
      scrollbar-width: none;
    }
    #backButton {
      position: fixed;
      padding: 1vw 1.5vw;
      top: 0;
      left: 0;
      font-size: 1.2vw;
      font-weight: 700;
      background-color: #fd86ff;
      color: rgb(20, 20, 20);
      border: none;
      cursor: pointer;
      /* Increase z-index so that backButton is also above dynamic elements */
      z-index: 10000 !important;
    }
    .band {
      width: 100%;
      height: fit-content;
      background-color: rgb(18, 18, 18);
      margin: 0;
      padding: 5vh 30vh 5vh 25vh;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    .band h3 {
      font-weight: 200;
      margin: 0;
      padding: 0;
      font-size: 3vh;
      color: #eeeeee;
    }
    .band h1 {
      font-weight: 500;
      font-size: 5vh;
      padding: 0;
      margin: 0;
      color: #eeeeee;
    }
    .band h2 {
      font-weight: 400;
      padding: 1vh 1.6vh 1vh 2vh;
      margin: 2vh 0 0 0;
      width: fit-content;
      border-radius: 40px;
      font-size: 2vh;
    }
    .band h2:hover {
      border: none !important;
      color: rgb(26, 26, 26) !important;
      background-color: rgb(235, 235, 235) !important;
    }
    .band a {
      margin: 0;
      text-decoration: none;
      color: #706700;
    }
    article {
      background-color: #eeeeee;
      padding: 10vw 23vw;
    }
    article p {
      font-size: 1.3vw;
      line-height: 2.5vw;
    }
    article h2 {
      font-weight: 600;
    }
    .splash {
      background-color: rgb(18, 18, 18);
      padding: 6vw 7vw 7vw 8vw;
      color: #d9d9d9;
    }
    .splash h1 {
      font-weight: 100;
      font-size: 4vw;
      letter-spacing: 1.1px;
      line-height: 5.7vw;
      color: #acacac;
    }
    .splash p {
      font-weight: 300;
      font-size: 2vw;
      letter-spacing: 1.2px;
      line-height: 0;
    }
    .splash a {
      text-decoration: none;
      font-weight: 500;
      color: #eeeeee;
    }
    .splash a img {
      height: 0;
      width: auto;
      position: absolute;
      margin: 10vw 0 0 0;
      opacity: 0;
      z-index: 1000;
      transition: all 0.3s ease;
    }
    .splash a:hover img {
      opacity: 100%;
      margin: 0;
      height: 6vw;
    }
    #gaze2 .fill, #trust .fill, #un .fill {
      color: #fd86ff;
    }
    .hover-text {
      position: relative;
      display: inline-block;
      cursor: pointer;
    }
    .hover-text .base {
      color: white;
    }
    .hover-text .fill {
      position: absolute;
      color: #afeb2f;
      top: 0;
      left: 0;
      clip-path: circle(0% at var(--x, 50%) var(--y, 50%));
      transition: clip-path 0.7s ease;
      pointer-events: none;
    }
    .hover-text:hover .fill {
      clip-path: circle(150% at var(--x, 50%) var(--y, 50%));
    }
    .bodyimg {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100vw;
      height: 120vh;
      overflow: hidden;
      position: relative;
      margin: 0;
      padding: 5vw 0 5vw 0;
      background-color: rgb(16, 16, 16);
    }
    .bodyimg img {
      height: 70%;
      width: auto;
      object-fit: contain;
      transition: transform 3s ease;
    }
    .bodyimg img.zoom-effect {
      transform: scale(1.1);
    }
    footer {
      background-color: #1d1c1c;
      height: 3.5vw;
      width: 32vw;
      position: fixed;
      bottom: 0;
      left: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000 !important;
      color: #e0e0e0;
      border-radius: 0px 30px 0 0;
    }
    .social-icons {
      display: flex;
      gap: 20px;
    }
    .social-icons a img {
      height: 1.2vw;
      width: auto;
      padding-left: 1vw;
      padding-right: 1vw;
    }
    .footer-text {
      color: #e0e0e0;
      font-size: 0.7vw;
      text-align: right;
      padding-left: 2vw;
      font-weight: 300;
    }
    footer.black-background .footer-text {
      color: #161717;
    }
    #container1, #container2 {
      width: 100vw;
      height: 160vh;
      position: relative;
      overflow: hidden;
      background-color: rgb(0, 0, 0);
    }
    .info-text {
      position: absolute;
      top: 0;
      right: 0;
      color: rgb(234, 234, 234);
      background-color: rgb(27, 27, 27);
      padding: 0 30px 0 30px;
      font-weight: 400;
      font-size: 1.2rem;
      z-index: 10000 !important;
      display: inline-flex;
      align-items: center;
      cursor: pointer;
    }
    .info-text:hover {
      background-color: #afeb2f;
      color: #161717;
    }
    .info-text:hover span {
      color: #161717;
    }
    .info-text span {
      font-weight: 500;
      color: #afeb2f;
      margin: 0;
      padding-right: 10px;
      font-size: 1.4rem;
      line-height: 1;
      display: inline-block;
    }
    .draggable {
      position: absolute;
      cursor: grab;
      text-decoration: none;
      user-select: none;
      max-width: 30vw;
      width: 100%;
      height: auto;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      background-color: #161717;
    }
    .draggable a {
      text-decoration: none;
    }
    .draggable h1 {
      opacity: 0;
      height: 0;
      text-decoration: none;
      font-weight: 300;
      font-size: 1.1rem;
      color: #e0e0e0;
      padding: 0;
      margin: 0;
      transition: all ease-in-out 0.1s;
    }
    .draggable:hover h1 {
      opacity: 1;
      height: fit-content;
      text-decoration: none;
      font-weight: 300;
      font-size: 1.1rem;
      color: #e0e0e0;
      padding: 1vw;
      margin: 0;
    }
    .draggable img.low-res {
      width: 100%;
      height: auto;
      display: block;
      transition: filter 0.5s ease;
    }
    .draggable img.high-res {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: auto;
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    .draggable img.high-res.loaded {
      opacity: 1;
    }
    .draggable.dragging {
      transform: scale(1.1) rotate(1deg);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.766);
      cursor: grabbing;
    }
    .draggable.dropped {
      animation: bounce 2s ease;
    }
    @keyframes bounce {
      0% { transform: translateY(0); }
      100% { transform: translateY(0); }
    }
    .toggle-button2, .toggle-button1 {
      position: absolute;
      top: 0;
      left: 0;
      background-color: rgb(234, 234, 234);
      color: rgb(19, 19, 19);
      border: none;
      padding: 10px 20px;
      font-size: 1.7rem;
      font-weight: 400;
      cursor: pointer;
      /* Always keep these above dynamic elements */
      z-index: 10000 !important;
      transition: background-color 0.3s ease;
    }
    .toggle-button2:hover, .toggle-button1:hover {
      background-color: #afeb2f;
      color: rgb(12, 12, 12);
    }
    #no2 {
      display: none;
    }
    .fade-in {
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    .fade-in.loaded {
      opacity: 1;
    }
    @media (max-width: 600px) {
      html, body {
        overflow-x: hidden;
      }
      body {
        font-size: 4vw;
        line-height: 1.4;
      }
      header.firstpage {
        height: auto;
        padding: 2vw;
        right: 0;
        top: 0;
        border-radius: 0;
      }
      header img {
        height: 3vw;
        width: auto;
      }
      #backButton {
        font-size: 4vw;
        padding: 2vw;
      }
      .band {
        padding: 10vw 5vw;
        height: auto;
      }
      .band h1 {
        font-size: 5vw;
        line-height: 1.2;
      }
      .band h2, .band h3 {
        font-size: 4vw;
        width: fit-content;
      }
      article {
        padding: 10vw 5vw;
      }
      article p {
        font-size: 4vw;
        line-height: 1.5;
      }
      .splash {
        padding: 10vw 5vw;
      }
      .splash h1 {
        font-size: 5vw;
        line-height: 1.3;
      }
      .splash p {
        font-size: 4vw;
        line-height: 1.2;
      }
      footer {
        width: 100%;
        height: 5vh;
        border-radius: 0;
        padding: 3vw;
        gap: 2vw;
        position: relative;
      }
      .social-icons a img {
        height: 3vw;
      }
      .footer-text {
        font-size: 2vw;
      }
      #mobilehide {
        display: none;
      }
      .mobilehide {
        display: none;
      }
      .toggle-button1, .toggle-button2 {
        font-size: 3vw;
        padding: 3vw;
      }
      .draggable {
        max-width: 55vw;
      }
      .info-text {
        font-size: 3vw;
      }
      .info-text span {
        font-size: 4vw;
      }
      .instruction-content {
        width: 55vw !important;
        padding: 50px 30px 50px 30px !important;
        border-radius: 20px;
      }
      .instruction-content h2 {
        font-size: 5.7vw !important;
      }
      .instruction-content p {
        font-size: 3vw !important;
      }
    }
    @media (min-width: 600px) {
      .desktophide {
        display: none;
      }
    }
    .interactive-wrapper {
      position: relative;
    }
    #instructionOverlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      display: flex;
      justify-content: center;
      z-index: 9999;
    }
    .instruction-content {
      max-width: 80%;
      height: fit-content;
      margin-top: 10vw;
      background: #1f1f1f;
      color: #eee;
      padding: 3.6rem 3.4rem;
      text-align: center;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
      border-radius: 20px;
    }
    .instruction-content h2 {
      margin-top: 0;
      font-size: 2rem;
      font-weight: 500;
      margin-bottom: 0.9rem;
    }
    .instruction-content p {
      font-size: 1.2rem;
      margin-bottom: 1.7rem;
      line-height: 1.6;
    }
    .instruction-content span {
      font-weight: 500;
      color: #fd86ff;
    }
    .close-overlay-btn {
      font-size: 1rem;
      padding: 0.7em 1.2em;
      margin-top: 0.5rem;
      background: #acacac;
      color: #111;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-weight: 600;
    }
    .close-overlay-btn:hover {
      background: #eee;
    }
    /* fixed-toggle class: when added, button sticks at top left */
    .fixed-toggle {
      position: fixed !important;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
  <header tabindex="0" aria-label="Home Button" class="firstpage">
    <a href="index.html" style="display: inline-block; cursor: pointer;">
      <img src="img/logo.png" alt="Logo" />
    </a>
  </header>
  <button id="backButton"></button>
  <article class="splash">
    <h1>Hi there, I'm
      <a id="me" href="https://www.linkedin.com/in/patrick-feeney-89920a258" target="_blank">
        <div class="hover-text">
          <span class="base">(Patrick)</span>
          <span class="fill">(Patrick)</span>
        </div>
        <img src="img/Silver-Touch--4.jpg" />
      </a>
      — 
      <br class="mobilehide">
      An integrated
      <a id="gaze2" href="game.html">
        <div class="hover-text">
          <span class="base">(designer)</span>
          <span class="fill">(designer)</span>
        </div>
        <img src="img/playing.webp" />
      </a>
      working across 
      <br class="mobilehide">
      <a id="gaze" href="gaze24.html">
        <div class="hover-text">
          <span class="base">(branding)</span>
          <span class="fill">(branding)</span>
        </div>
        <img src="img/gaze large format.png" />
      </a> 
      and technology
      <a id="trust" href="trust.html">
        <div class="hover-text">
          <span class="base">(ethics)</span>
          <span class="fill">(ethics)</span>
        </div>
        <img src="img/Slide8.jpeg" />
      </a>, where
      <br class="mobilehide">
      I specialise in
      <a id="tech" href="tech.html">
        <div class="hover-text">
          <span class="base">(science)</span>
          <span class="fill">(science)</span>
        </div>
        <img src="img/techad.png" />
      </a>communication , 
      <br class="mobilehide">
      and 
      <a id="un" href="un.html">
        <div class="hover-text">
          <span class="base">(interaction)</span>
          <span class="fill">(interaction)</span>
        </div>
        <img src="img/unfinished.webp" />
      </a>design .
    </h1>
  </article>
  <div class="interactive-wrapper">
    <!-- Instruction Overlay -->
    <div id="instructionOverlay">
      <div class="instruction-content">
        <h2>How to Navigate</h2>
        <p><span>Drag</span> an image to move it around,<br> or <span>double click</span> to learn more. <br> To see more projects, click<br> the <span>next</span> button on the top left.</p>
        <button class="close-overlay-btn" id="closeInstructionBtn">Got it!</button>
      </div>
    </div>
    <div id="no1">
      <div id="container1">
        <!-- Info-text acting as a button -->
        <div class="info-text" role="button" tabindex="0">
          <p><span>&#9432;</span> How to Navigate</p>
        </div>
        <button class="toggle-button1">Next &#x27A1;</button>
        <!-- Draggable Items with Low-res and High-res Images -->
        <div class="draggable">
          <a href="un.html">
            <img src="img/low/unfinished.jpeg" alt="Low-Res Image" class="low-res loading" />
            <img src="img/unfinished.webp" alt="High-Res Image" class="high-res fade-in" />
            <h1>Unfinished Business <span style="opacity: 40%;">| Platform Development</span></h1>
          </a>
        </div>
        <div class="draggable">
          <a href="spec.html">
            <img src="img/low/newspaper1.jpg" alt="Low-Res Image" class="low-res loading" />
            <img src="img/newspaper1.webp" alt="High-Res Image" class="high-res fade-in" />
            <h1>The Daily Metaverse <span style="opacity: 40%;">| Speculative Design</span></h1>
          </a>
        </div>
        <div class="draggable" style="max-width: 27vw;">
          <a href="path.html">
            <img src="img/low/Pathfinder_Background_V1.png" alt="Low-Res Image" class="low-res loading" />
            <img src="img/Pathfinder_Background_V1.png" alt="High-Res Image" class="high-res fade-in" />
            <h1>Pathfinder <span style="opacity: 40%;">| A Brief Worth Breaking</span></h1>
          </a>
        </div>
        <div class="draggable" id="mobilehide" style="max-width: 27vw;">
          <a href="card.html">
            <img src="img/Cast Of Characters.png" alt="Low-Res Image" class="low-res loading" />
            <img src="img/Cast Of Characters.png" alt="High-Res Image" class="high-res fade-in" />
            <h1>Cast of Characters <span style="opacity: 40%;">| Interaction Design</span></h1>
          </a>
        </div>
        <div class="draggable">
          <a href="trust.html">
            <img src="img/low/Slide10.jpeg" alt="Low-Res Image" class="low-res loading" />
            <img src="img/Slide10.webp" alt="High-Res Image" class="high-res fade-in" />
            <h1>Trust Fall <span style="opacity: 40%;">| Interaction Design</span></h1>
          </a>
        </div>
        <div class="draggable">
          <a href="tech.html">
            <img src="img/low/techad.jpg" alt="Low-Res Image" class="low-res loading" />
            <img src="img/techadoption.gif" alt="High-Res Image" class="high-res fade-in" />
            <h1>Tech Adoption <span style="opacity: 40%;">| Science Communication</span></h1>
          </a>
        </div>
      </div>
    </div>
    <div id="no2">
      <div id="container2">
        <!-- Info-text acting as a button here as well -->
        <div class="info-text" role="button" tabindex="0">
          <p><span>&#9432;</span> How to Navigate</p>
        </div>
        <button class="toggle-button2">&#x2B05; Back</button>
        <!-- Draggable Items with Low-res and High-res Images -->
        <div class="draggable">
          <a href="gaze23.html">
            <img src="img/low/GAZE_01.png" alt="Low-Res Image" class="low-res loading" />
            <img src="img/GAZE_01.webp" alt="High-Res Image" class="high-res fade-in" />
            <h1>GAZE Film Fest 2023 <span style="opacity: 40%;">| Brand Identity</span></h1>
          </a>
        </div>
        <div class="draggable">
          <a href="game.html">
            <img src="img/playing.webp" alt="Low-Res Image" class="low-res loading" />
            <img src="img/playing.webp" alt="High-Res Image" class="high-res fade-in" />
            <h1>Playing The Port' <span style="opacity: 40%;">| Interactive Portfolio</span></h1>
          </a>
        </div>
        <div class="draggable">
          <a href="gaze24.html">
            <img src="img/low/gazefilm.jpg" alt="Low-Res Image" class="low-res loading" />
            <img src="img/gazefilm.gif" alt="High-Res Image" class="high-res fade-in" />
            <h1>GAZE Film Fest 2024 <span style="opacity: 40%;">| Accessible Ecosystem</span></h1>
          </a>
        </div>
        <div class="draggable">
          <a href="pol.html">
            <img src="img/low/BLUE-jpeg-4.jpg" alt="Low-Res Image" class="low-res loading" />
            <img src="img/BLUE-jpeg-4.webp" alt="High-Res Image" class="high-res fade-in" />
            <h1>Political Material <span style="opacity: 40%;">| Material Culture</span></h1>
          </a>
        </div>
        <div class="draggable">
          <a href="newtennant.html">
            <img src="img/low/catu02.png" alt="Low-Res Image" class="low-res loading" />
            <img src="img/catu02.png" alt="High-Res Image" class="high-res fade-in" />
            <h1>The New Tenant <span style="opacity: 40%;">| Activism</span></h1>
          </a>
        </div>
        <div class="draggable">
          <a href="for.html">
            <img src="img/low/foresightcreative.png" alt="Low-Res Image" class="low-res loading" />
            <img src="img/low/foresightcreative.png" alt="High-Res Image" class="high-res fade-in" />
            <h1>Creative Foresight <span style="opacity: 40%;">| Speculative Workshop</span></h1>
          </a>
        </div>
        <div class="draggable">
          <a href="flag.html">
            <img src="img/low/Final-render-New-Flag-2draft-2.png" alt="Low-Res Image" class="low-res loading" />
            <img src="img/Final-render-New-Flag-2draft-2.png" alt="High-Res Image" class="high-res fade-in" />
            <h1>Just To Flag <span style="opacity: 40%;">| Public Installation</span></h1>
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="band">
    <h1>Playing The 'Port | Interactive Portfolio</h1>
    <a href="game.html"><h2 style="color:#afeb2f; border: 1px solid #afeb2f;">Explore</h2></a>
  </div>
  <div class="band" style="background-color: #171717;">
    <h1>AI Advertising & The Simulation of Diversity | Opinion</h1>
    <a href="aidiversity.html"><h2 style="color:#afeb2f; border: 1px solid #afeb2f;">Explore</h2></a>
  </div>
  <div class="band" style="height: 2vh !important; padding: 2vw !important;"></div>
  <footer>
    <div class="social-icons">
      <a href="https://www.instagram.com/patrickfeeneydesigner/" target="_blank" aria-label="Instagram" role="link">
        <img src="img/instagram-icon.png" alt="Instagram" tabindex="0" />
      </a>
      <a href="mailto:patfeeney1098@gmail.com" target="_blank" aria-label="Email" role="link">
        <img src="img/email.png" alt="Email Me" tabindex="0" />
      </a>
    </div>
    <div class="footer-text">
      &copy; Patrick Feeney Design 2024 | All rights reserved
    </div>
  </footer>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      let activeContainerId = "container1";
      let isDragging = false;
      let activeElement = null, offsetX = 0, offsetY = 0;
      let velocityX = 0, velocityY = 0;
      const friction = 0.95;
      let zIndexCounter = 1000;
      // Keep track of positions
      const placedImagesData = { "container1": [], "container2": [] };
      let savedPositions = { "container1": [], "container2": [] };
      // Overlay logic
      const overlayShown = localStorage.getItem("overlayShown") === "true";
      const overlayClosedAt = localStorage.getItem("overlayClosedAt");
      const oneDay = 24 * 60 * 60 * 1000;
      const now = Date.now();
      if (!overlayShown || !overlayClosedAt || (now - parseInt(overlayClosedAt)) > oneDay) {
        document.getElementById('instructionOverlay').style.display = 'flex';
      } else {
        document.getElementById('instructionOverlay').style.display = 'none';
      }
      // For each toggle button, if visible, store its original offset
      const toggleButtons = document.querySelectorAll('.toggle-button1, .toggle-button2');
      toggleButtons.forEach(btn => {
        if (btn.offsetParent !== null) {
          btn.dataset.originalOffset = btn.getBoundingClientRect().top + window.scrollY;
        }
      });
      function setupDraggable(containerId) {
        const container = document.getElementById(containerId);
        const containerRect = container.getBoundingClientRect();
        const draggables = container.querySelectorAll('.draggable');
        if (savedPositions[containerId].length === draggables.length) {
          draggables.forEach((elem, index) => {
            const { left, top, zIndex: storedZIndex } = savedPositions[containerId][index];
            elem.style.left = `${left}px`;
            elem.style.top = `${top}px`;
            if (storedZIndex) {
              elem.style.zIndex = storedZIndex;
              if (storedZIndex > zIndexCounter) {
                zIndexCounter = storedZIndex;
              }
            }
          });
          return;
        }
        placedImagesData[containerId] = [];
        draggables.forEach((elem, index) => {
          const lowResImage = elem.querySelector('img.low-res');
          function setPosition() {
            const elemWidth = elem.offsetWidth;
            const elemHeight = elem.offsetHeight;
            const maxX = containerRect.width - elemWidth;
            const maxY = containerRect.height - elemHeight;
            function overlapsForbiddenZone(testX, testY, testWidth, testHeight) {
              for (const data of placedImagesData[containerId]) {
                const A_left = testX;
                const A_right = testX + testWidth;
                const A_top = testY;
                const A_bottom = testY + testHeight;
                const B_left = data.forbiddenX1;
                const B_right = data.forbiddenX2;
                const B_top = data.forbiddenY1;
                const B_bottom = data.forbiddenY2;
                if (A_left < B_right && A_right > B_left && A_top < B_bottom && A_bottom > B_top) {
                  return true;
                }
              }
              return false;
            }
            let attempts = 500;
            let positioned = false;
            let randomX, randomY;
            while (attempts > 0 && !positioned) {
              randomX = Math.floor(Math.random() * maxX);
              randomY = Math.floor(Math.random() * maxY);
              if (!overlapsForbiddenZone(randomX, randomY, elemWidth, elemHeight)) {
                positioned = true;
              }
              attempts--;
            }
            if (!positioned) {
              randomX = Math.floor(maxX / 2);
              randomY = Math.floor(maxY / 2);
            }
            elem.style.left = `${randomX}px`;
            elem.style.top = `${randomY}px`;
            const forbiddenZoneWidth = elemWidth * 0.22;
            const forbiddenZoneHeight = elemHeight * 0.22;
            const fzX1 = randomX + (elemWidth - forbiddenZoneWidth) / 2;
            const fzY1 = randomY + (elemHeight - forbiddenZoneHeight) / 2;
            const fzX2 = fzX1 + forbiddenZoneWidth;
            const fzY2 = fzY1 + forbiddenZoneHeight;
            placedImagesData[containerId].push({
              forbiddenX1: fzX1,
              forbiddenY1: fzY1,
              forbiddenX2: fzX2,
              forbiddenY2: fzY2
            });
            savedPositions[containerId][index] = {
              left: randomX,
              top: randomY,
              zIndex: parseInt(elem.style.zIndex) || 1000
            };
          }
          if (lowResImage.complete && lowResImage.naturalHeight !== 0) {
            setPosition();
          } else {
            lowResImage.onload = setPosition;
          }
          let lastTapTime = 0;
          const link = elem.querySelector('a');
          link.addEventListener('touchend', function(e) {
            const currentTime = new Date().getTime();
            const tapGap = currentTime - lastTapTime;
            if (tapGap < 300 && tapGap > 0) {
              window.location.href = this.href;
            }
            lastTapTime = currentTime;
            e.preventDefault();
          }, false);
          let clickTimeout = null;
          link.addEventListener('click', function(e) {
            e.preventDefault();
            if (clickTimeout !== null) {
              clearTimeout(clickTimeout);
              clickTimeout = null;
              window.location.href = this.href;
            } else {
              clickTimeout = setTimeout(() => {
                clickTimeout = null;
              }, 300);
            }
          });
        });
      }
      setupDraggable("container1");
      function startDrag(e) {
        const container = document.getElementById(activeContainerId);
        const target = (e.targetTouches && e.targetTouches[0]) ? e.targetTouches[0].target : e.target;
        if (target.closest && target.closest('.draggable')) {
          activeElement = target.closest('.draggable');
          const rect = activeElement.getBoundingClientRect();
          const containerRect = container.getBoundingClientRect();
          const clientX = (e.targetTouches && e.targetTouches[0]) ? e.targetTouches[0].clientX : e.clientX;
          const clientY = (e.targetTouches && e.targetTouches[0]) ? e.targetTouches[0].clientY : e.clientY;
          offsetX = clientX - rect.left;
          offsetY = clientY - rect.top;
          isDragging = true;
          velocityX = 0;
          velocityY = 0;
          zIndexCounter++;
          activeElement.style.zIndex = zIndexCounter;
          activeElement.classList.add('dragging');
          e.preventDefault();
        }
      }
      function onMove(e) {
        if (isDragging && activeElement) {
          const container = document.getElementById(activeContainerId);
          const containerRect = container.getBoundingClientRect();
          const clientX = (e.targetTouches && e.targetTouches[0]) ? e.targetTouches[0].clientX : e.clientX;
          const clientY = (e.targetTouches && e.targetTouches[0]) ? e.targetTouches[0].clientY : e.clientY;
          const newX = clientX - containerRect.left - offsetX;
          const newY = clientY - containerRect.top - offsetY;
          velocityX = newX - parseFloat(activeElement.style.left || 0);
          velocityY = newY - parseFloat(activeElement.style.top || 0);
          activeElement.style.left = `${newX}px`;
          activeElement.style.top = `${newY}px`;
        }
      }
      function endDrag() {
        if (isDragging) {
          isDragging = false;
          if (activeElement) {
            activeElement.classList.remove('dragging');
            activeElement.classList.add('dropped');
            activeElement.addEventListener('animationend', function handleAnimationEnd() {
              activeElement.classList.remove('dropped');
              activeElement.removeEventListener('animationend', handleAnimationEnd);
            });
            const container = document.getElementById(activeContainerId);
            const draggables = Array.from(container.querySelectorAll('.draggable'));
            const index = draggables.indexOf(activeElement);
            if (index > -1) {
              savedPositions[activeContainerId][index].left = parseFloat(activeElement.style.left);
              savedPositions[activeContainerId][index].top = parseFloat(activeElement.style.top);
              savedPositions[activeContainerId][index].zIndex = parseInt(activeElement.style.zIndex);
            }
          }
          function applyMomentum() {
            if (!isDragging && activeElement) {
              const container = document.getElementById(activeContainerId);
              const containerRect = container.getBoundingClientRect();
              let newX = parseFloat(activeElement.style.left || 0) + velocityX;
              let newY = parseFloat(activeElement.style.top || 0) + velocityY;
              velocityX *= friction;
              velocityY *= friction;
              newX = Math.max(0, Math.min(containerRect.width - activeElement.offsetWidth, newX));
              newY = Math.max(0, Math.min(containerRect.height - activeElement.offsetHeight, newY));
              activeElement.style.left = `${newX}px`;
              activeElement.style.top = `${newY}px`;
              const draggables = Array.from(container.querySelectorAll('.draggable'));
              const index = draggables.indexOf(activeElement);
              if (index > -1) {
                savedPositions[activeContainerId][index].left = newX;
                savedPositions[activeContainerId][index].top = newY;
              }
              if (Math.abs(velocityX) > 0.5 || Math.abs(velocityY) > 0.5) {
                requestAnimationFrame(applyMomentum);
              }
            }
          }
          applyMomentum();
        }
      }
      document.addEventListener('mousedown', startDrag, false);
      document.addEventListener('mousemove', onMove, false);
      document.addEventListener('mouseup', endDrag, false);
      document.addEventListener('touchstart', startDrag, {passive: false});
      document.addEventListener('touchmove', onMove, {passive: false});
      document.addEventListener('touchend', endDrag, false);
      // Toggle between pages – copy the fixed state from the currently visible button to the newly visible one.
      document.querySelector(".toggle-button1").addEventListener("click", () => {
        // Read the current next button's position and fixed state.
        const nextBtn = document.querySelector(".toggle-button1");
        const nextOffset = nextBtn.getBoundingClientRect().top + window.scrollY;
        // Switch to container2.
        document.getElementById("no1").style.display = "none";
        document.getElementById("no2").style.display = "block";
        activeContainerId = "container2";
        setupDraggable("container2");
        // Get the back button and apply the same offset and fixed state.
        const backBtn = document.querySelector(".toggle-button2");
        backBtn.dataset.originalOffset = nextOffset;
        if (nextBtn.classList.contains("fixed-toggle") || window.scrollY > nextOffset) {
          backBtn.classList.add("fixed-toggle");
        } else {
          backBtn.classList.remove("fixed-toggle");
        }
      });
      document.querySelector(".toggle-button2").addEventListener("click", () => {
        const backBtn = document.querySelector(".toggle-button2");
        const backOffset = backBtn.getBoundingClientRect().top + window.scrollY;
        document.getElementById("no2").style.display = "none";
        document.getElementById("no1").style.display = "block";
        activeContainerId = "container1";
        setupDraggable("container1");
        const nextBtn = document.querySelector(".toggle-button1");
        nextBtn.dataset.originalOffset = backOffset;
        if (backBtn.classList.contains("fixed-toggle") || window.scrollY > backOffset) {
          nextBtn.classList.add("fixed-toggle");
        } else {
          nextBtn.classList.remove("fixed-toggle");
        }
      });
      // Lazy load high-resolution images
      const highResImages = document.querySelectorAll('img.high-res');
      const loadHighResImage = (img) => {
        const highResSrc = img.src;
        if (!highResSrc) return;
        const highResImg = new Image();
        highResImg.src = highResSrc;
        highResImg.onload = () => {
          img.classList.add('loaded');
          const lowResImg = img.previousElementSibling;
          if (lowResImg && lowResImg.classList.contains('loading')) {
            lowResImg.classList.remove('loading');
          }
        };
      };
      if ('IntersectionObserver' in window) {
        const observer = new IntersectionObserver((entries, obs) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const img = entry.target;
              loadHighResImage(img);
              obs.unobserve(img);
            }
          });
        }, {
          rootMargin: "50px",
          threshold: 0.1
        });
        highResImages.forEach(img => {
          observer.observe(img);
        });
      } else {
        highResImages.forEach(img => loadHighResImage(img));
      }
      // Close the overlay and store timestamp
      document.getElementById('closeInstructionBtn').addEventListener('click', () => {
        document.getElementById('instructionOverlay').style.display = 'none';
        localStorage.setItem("overlayShown", "true");
        localStorage.setItem("overlayClosedAt", Date.now().toString());
      });
      // Show overlay when info-text is clicked
      const infoTexts = document.querySelectorAll('.info-text');
      infoTexts.forEach(infoText => {
        infoText.addEventListener('click', () => {
          document.getElementById('instructionOverlay').style.display = 'flex';
        });
      });
    });
    // Fixed positioning on scroll for toggle buttons
    window.addEventListener('scroll', () => {
      const toggleButtons = document.querySelectorAll('.toggle-button1, .toggle-button2');
      toggleButtons.forEach(btn => {
        const originalOffset = parseFloat(btn.dataset.originalOffset) || 0;
        if (window.scrollY > originalOffset) {
          btn.classList.add('fixed-toggle');
        } else {
          btn.classList.remove('fixed-toggle');
        }
      });
    });
    document.querySelectorAll('.hover-text').forEach((hoverText) => {
      hoverText.addEventListener('mousemove', (e) => {
        const rect = hoverText.getBoundingClientRect();
        const x = ((e.clientX - rect.left) / rect.width) * 100 + '%';
        const y = ((e.clientY - rect.top) / rect.height) * 100 + '%';
        hoverText.style.setProperty('--x', x);
        hoverText.style.setProperty('--y', y);
      });
      hoverText.addEventListener('mouseenter', () => {
        hoverText.classList.add('active');
      });
      hoverText.addEventListener('mouseleave', () => {
        hoverText.classList.remove('active');
      });
    });
  </script>
</body>
</html>

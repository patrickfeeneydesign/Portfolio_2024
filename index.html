<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patrick Feeney Design</title>
    <meta name="description" content="Join the GAZE INTERNATIONAL LGBTQIA FILM FESTIVAL for a celebration of queer cinema.">
    <link rel="icon" href="img/black_circle.png" type="image/png">
    <link rel="stylesheet" href="https://use.typekit.net/opq3sul.css">
    <link rel="stylesheet" href="https://use.typekit.net/kyu3tgb.css">
    <style>
html, body {
    overflow-x: hidden;
    touch-action: manipulation;
}

header {
    position: fixed;
    text-align: left;
    border-radius: 0 0 40px 40px;
    background-color: rgb(180, 114, 255);
    right: -9vw;
    top: -0.1vw;
    margin: 0;
    padding: 0;
    z-index: 1000;
}

header.firstpage {
    position: fixed;
    text-align: left;
    margin: 0;
    height: 3vw;
    padding-left: 1vw;
    padding-right: 10vw;
    padding-top: 0.8vw;
    padding-bottom: 0.8vw;
    z-index: 4000;
    align-content: center;
}

header img {
    height: 1vw;
    width: auto;
    filter: invert(100%);
    padding: 0 0 0 1vw;
    transition: all 0.3s;
}

body {
    font-family: tt-commons-pro, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #eeeeee;
    scrollbar-width: none; 
}

#backButton {
    position: fixed;
    padding: 1vw 1.5vw;
    top: 0;
    left: 0;
    font-size: 1.2vw;
    font-weight: 700;
    background-color:  rgb(180, 114, 255);
    color: rgb(20, 20, 20);
    border: none;
    cursor: pointer;
    z-index: 1000;
}

.band {
    width: 100vw;
    height: 7vw;
    background-color: rgb(27, 27, 27);
    margin: 0;
    padding: 8vh 15vh 15vh 25vh;
}

.band h3 {
    font-weight: 200;
    margin: 0;
    padding: 0;
    font-size: 3vh;
    color: #eeeeee;
}

.band h1 {
    font-weight: 500;
    font-size: 6vh;
    padding: 0;
    margin: 0;
    color: #eeeeee;
}

.band h2 {
    font-weight: 400;
    padding: 0.7vh 0 0 0;
    margin: 0;
    font-size: 3vh;
    color:rgb(236, 236, 236);
}

.band a {
    margin: 0;
    text-decoration: none;
    color: #706700;
}

article {
    background-color: #eeeeee;
    padding: 10vw 23vw;
}

article p {
    font-size: 1.3vw;
    line-height: 2.5vw;
}

article h2 {
    font-weight: 600;
}

.splash {
   background-color: rgb(27, 27, 27);
   padding: 8vw;
   color: #eeeeee;
}

.splash h1 {
   font-weight: 500;
   font-size: 3.8vw;
   line-height: 5vw;
}

.splash p {
   font-weight: 300;
   font-size: 2vw;
   line-height: 0;
   color:  rgb(180, 114, 255);
}

.bodyimg {
    display: flex; 
    justify-content: center; 
    align-items: center; 
    width: 100vw; 
    height: 120vh; 
    overflow: hidden; 
    position: relative; 
    margin: 0; 
    padding: 5vw 0 5vw 0;
    background-color: rgb(16, 16, 16);
}

.bodyimg img {
    height: 70%; 
    width: auto; 
    object-fit: contain; 
    transition: transform 3s ease; 
}

.bodyimg img.zoom-effect {
    transform: scale(1.1); 
}

/* Footer */
footer {
    background-color: #1d1c1c;
    height: 3.5vw;
    width: 32vw;
    position: fixed;
    bottom: 0;
    left: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    color: #e0e0e0;
    border-radius: 0px 30px 0 0;
}

.social-icons {
    display: flex;
    gap: 20px;
}

.social-icons a img {
    height: 1.2vw;
    width: auto;
    padding-left: 1vw;
    padding-right: 1vw;
}

.footer-text {
    color: #e0e0e0;
    font-size: 0.7vw;
    text-align: right;
    padding-left: 2vw;
    font-weight: 300;
}

footer.black-background .footer-text {
    color: #161717;
}

#container1, #container2 {
    width: 100vw;
    height: 120vh;
    position: relative;
    overflow: hidden;
    background-color: rgb(16, 16, 16);
}

.info-text {
    position: absolute;
    top: 0;
    right: 0;
    color:rgb(234, 234, 234);
    background-color:  rgb(27, 27, 27);
    padding: 10px 15px;
    font-weight: 300;
    font-size: 1.2rem;
    z-index: 100;
    display: flex;
    align-items: center; 
}

.info-text p {
    padding: 0;
    margin: 0;
}

.info-text span {
    font-weight: 500;
    color: rgb(180, 114, 255);
}

/* Limit the size of the draggable elements to a max width */
.draggable {
    position: absolute;
    cursor: grab;
    user-select: none;
    max-width: 500px;
    width: 100%; 
    height: auto;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.draggable img {
    width: 100%;
    height: auto;
    display: block;
}

/* Visual feedback classes */
.draggable.dragging {
    transform: scale(1.1) rotate(1deg);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.766);
    cursor: grabbing;
}

.draggable.dropped {
    animation: bounce 2s ease;
}

@keyframes bounce {
    0% { transform: translateY(0); }
    100% { transform: translateY(0); }
}

.toggle-button2, .toggle-button1 {
    position: absolute;
    top: 0;
    left: 0;
    background-color: rgb(234, 234, 234);
    color: rgb(19, 19, 19);
    border: none;
    padding: 10px 20px;
    font-size: 1.7rem;
    font-weight: 300;
    cursor: pointer;
    z-index: 100;
    transition: background-color 0.3s ease;
}

.toggle-button2:hover, .toggle-button1:hover {
    background-color: rgb(180, 114, 255);
    color: rgb(12, 12, 12);
}

#no2 {
    display: none;
}

/* Fade-in transition */
.fade-in {
    opacity: 0;
    transition: opacity 0.5s ease;
}
.fade-in.loaded {
    opacity: 1;
}

/* Mobile Styles */
@media (max-width: 600px) {
    html, body {
        overflow-x: hidden;
    }

    body {
        font-size: 4vw; 
        line-height: 1.4;
    }

    header.firstpage {
        height: auto;
        padding: 2vw;
        right: 0;
        top: 0;
        border-radius: 0;
    }

    header img {
        height: 3vw; 
        width: auto;
    }

    #backButton {
        font-size: 4vw;
        padding: 2vw;
    }

    .band {
        padding: 10vw 5vw;
        height: auto;
    }
    .band h1 {
        font-size: 5vw;
        line-height: 1.2;
    }
    .band h2, .band h3 {
        font-size: 4vw;
    }

    article {
        padding: 10vw 5vw;
    }

    article p {
        font-size: 4vw;
        line-height: 1.5;
    }

    .splash {
        padding: 10vw 5vw;
    }
    .splash h1 {
        font-size: 5vw;
        line-height: 1.3;
    }
    .splash p {
        font-size: 4vw;
        line-height: 1.2;
    }

    footer {
        width: 100%;
        height: 5vh;
        border-radius: 0;
        padding: 3vw;
        gap: 2vw;
        position: relative;
    }

    .social-icons a img {
        height: 3vw;
    }

    .footer-text {
        font-size: 2vw;
    }

    .info-text {
        font-size: 2.5vw;
        padding: 2.3vw;
        z-index: 1000;
    }

    #mobilehide {
        display: none;
    }

    .toggle-button1, .toggle-button2 {
        font-size: 3vw;
        padding: 2vw 9vw 2vw 4vw;
    }

.draggable {
    max-width: 50vw;
}
}
    </style>
</head>
<body>
    <button id="backButton" onclick="history.back();">&#8734;</button>

    <header tabindex="0" aria-label="Home Button" class="firstpage">
        <a href="index.html" style="display: inline-block; cursor: pointer;">
            <img class="mobilehide" src="img/logo.png" alt="Logo">
        </a>
    </header>

    <article class="splash">
        <p>Patrick Feeney</p>
        <h1>I'm a visual designer working across branding, technology ethics, science communication, and interaction design.
        </h1>
    </article>

    <div id="no1">
        <div id="container1">
            <div class="info-text">
                <p><span>Drag</span> an image to move it around, or <span>double click</span> to learn more</p>
            </div>

            <button class="toggle-button1">Next Page > </button>

            <div class="draggable">
                <a href="spec.html">
                    <img src="img/low/newspaper1.jpg" data-fullsrc="img/newspaper1.jpg" alt="Placeholder Image" class="fade-in">
                </a>
            </div>
            
            <div class="draggable">
                <a href="pol.html">
                    <img src="img/low/BLUE-jpeg-4.jpg" data-fullsrc="img/BLUE-jpeg-4.jpg" alt="Placeholder Image" class="fade-in">
                </a>
            </div>

            <div class="draggable">
                <a href="gaze23.html">
                    <img src="img/low/GAZE_01.png" data-fullsrc="img/GAZE_01.png" alt="Placeholder Image" class="fade-in">
                </a>
            </div>

            <div class="draggable">
                <a href="gaze24.html">
                    <img src="img/low/gazefilm.png" data-fullsrc="img/gazefilm.gif" alt="Placeholder Image" class="fade-in">
                </a>
            </div>

            <div class="draggable">
                <a href="trust.html">
                    <img src="img/low/Slide10.jpeg" data-fullsrc="img/Slide10.jpeg" alt="Placeholder Image" class="fade-in">
                </a>
            </div>
        </div>
    </div>

    <div id="no2">
        <div id="container2">
            <div class="info-text">
                <p><span>Drag</span> an image to move it around, or <span>double click</span> to learn more</p>
            </div>

            <button class="toggle-button2">< Previous Page</button>

            <div class="draggable" id="mobilehide">
                <a href="cardgame.html">
                    <img src="img/low/Toolkits_02.gif" data-fullsrc="img/Toolkits_02.gif" alt="Placeholder Image" class="fade-in">
                </a>
            </div>

            <div class="draggable">
                <a href="path.html">
                    <img src="img/low/Pathfinder_Background_V1.png" data-fullsrc="img/Pathfinder_Background_V1.png" alt="Placeholder Image" class="fade-in">
                </a>
            </div>

            <div class="draggable">
                <a href="newtennant.html">
                    <img src="img/low/catu02.png" data-fullsrc="img/catu02.png" alt="Placeholder Image" class="fade-in">
                </a>
            </div>

            <div class="draggable">
                <a href="for.html">
                    <img src="img/low/foresightcreative.png" data-fullsrc="img/low/foresightcreative.png" alt="Placeholder Image" class="fade-in">
                </a>
            </div>

            <div class="draggable">
                <a href="flag.html">
                    <img src="img/low/Final-render-New-Flag-2draft-2.png" data-fullsrc="img/Final-render-New-Flag-2draft-2.png" alt="Placeholder Image" class="fade-in">
                </a>
            </div>
        </div>
    </div>

    <footer>
        <div class="social-icons">
            <a href="https://www.instagram.com/patrickfeeneydesigner/" target="_blank" aria-label="Instagram" role="link">
                <img src="img/instagram-icon.png" alt="Instagram" tabindex="0">
            </a>
            <a href="mailto:patfeeney1098@gmail.com" target="_blank" aria-label="Email" role="link">
                <img src="img/email.png" alt="Email Me" tabindex="0">
            </a>
        </div>
        <div class="footer-text">
            &copy; Patrick Feeney Design 2024 | All rights reserved
        </div>
    </footer>

<script>
document.addEventListener("DOMContentLoaded", () => {
    let activeContainerId = "container1";
    let isDragging = false;
    let activeElement = null, offsetX = 0, offsetY = 0;
    let velocityX = 0, velocityY = 0;
    const friction = 0.95;

    // Keep track of highest z-index to ensure top-most element
    let zIndexCounter = 1000;

    const placedImagesData = { "container1": [], "container2": [] };

    function setupDraggable(containerId) {
        const container = document.getElementById(containerId);
        const containerRect = container.getBoundingClientRect();
        const draggables = container.querySelectorAll('.draggable');

        placedImagesData[containerId] = [];

        draggables.forEach(elem => {
            const image = elem.querySelector('img');

            function setPosition() {
                const elemWidth = image.offsetWidth;
                const elemHeight = image.offsetHeight;
                const maxX = containerRect.width - elemWidth;
                const maxY = containerRect.height - elemHeight;

                function overlapsForbiddenZone(testX, testY, testWidth, testHeight) {
                    for (const data of placedImagesData[containerId]) {
                        const A_left = testX;
                        const A_right = testX + testWidth;
                        const A_top = testY;
                        const A_bottom = testY + testHeight;

                        const B_left = data.forbiddenX1;
                        const B_right = data.forbiddenX2;
                        const B_top = data.forbiddenY1;
                        const B_bottom = data.forbiddenY2;

                        if (A_left < B_right && A_right > B_left && A_top < B_bottom && A_bottom > B_top) {
                            return true;
                        }
                    }
                    return false;
                }

                let attempts = 500; 
                let positioned = false;
                let randomX, randomY;

                while (attempts > 0 && !positioned) {
                    randomX = Math.floor(Math.random() * maxX);
                    randomY = Math.floor(Math.random() * maxY);

                    if (!overlapsForbiddenZone(randomX, randomY, elemWidth, elemHeight)) {
                        positioned = true;
                    }
                    attempts--;
                }

                if (!positioned) {
                    randomX = Math.floor(maxX / 2);
                    randomY = Math.floor(maxY / 2);
                }

                elem.style.left = `${randomX}px`;
                elem.style.top = `${randomY}px`;

                const forbiddenZoneWidth = elemWidth * 0.22; 
                const forbiddenZoneHeight = elemHeight * 0.22; 
                const fzX1 = randomX + (elemWidth - forbiddenZoneWidth) / 2;
                const fzY1 = randomY + (elemHeight - forbiddenZoneHeight) / 2;
                const fzX2 = fzX1 + forbiddenZoneWidth;
                const fzY2 = fzY1 + forbiddenZoneHeight;

                placedImagesData[containerId].push({
                    forbiddenX1: fzX1,
                    forbiddenY1: fzY1,
                    forbiddenX2: fzX2,
                    forbiddenY2: fzY2
                });
            }

            if (image.complete && image.naturalHeight !== 0) {
                setPosition();
            } else {
                image.onload = setPosition;
            }

            let lastTapTime = 0;
            const link = elem.querySelector('a');
            link.addEventListener('touchend', function(e) {
                const currentTime = new Date().getTime();
                const tapGap = currentTime - lastTapTime;
                if (tapGap < 300 && tapGap > 0) {
                    window.location.href = this.href;
                }
                lastTapTime = currentTime;
                e.preventDefault();
            }, false);

            let clickTimeout = null;
            link.addEventListener('click', function(e) {
                e.preventDefault();
                if (clickTimeout !== null) {
                    clearTimeout(clickTimeout);
                    clickTimeout = null;
                    window.location.href = this.href;
                } else {
                    clickTimeout = setTimeout(() => {
                        clickTimeout = null;
                    }, 300);
                }
            });
        });
    }

    setupDraggable("container1");

    function startDrag(e) {
        const container = document.getElementById(activeContainerId);
        const target = (e.targetTouches && e.targetTouches[0]) ? e.targetTouches[0].target : e.target;
        if (target.closest && target.closest('.draggable')) {
            activeElement = target.closest('.draggable');
            const rect = activeElement.getBoundingClientRect();
            const containerRect = container.getBoundingClientRect();
            const clientX = (e.targetTouches && e.targetTouches[0]) ? e.targetTouches[0].clientX : e.clientX;
            const clientY = (e.targetTouches && e.targetTouches[0]) ? e.targetTouches[0].clientY : e.clientY;

            offsetX = clientX - rect.left;
            offsetY = clientY - rect.top;
            isDragging = true;
            velocityX = 0;
            velocityY = 0;

            // Bring this element to top
            zIndexCounter++;
            activeElement.style.zIndex = zIndexCounter;

            activeElement.classList.add('dragging');
            e.preventDefault();
        }
    }

    function onMove(e) {
        if (isDragging && activeElement) {
            const container = document.getElementById(activeContainerId);
            const containerRect = container.getBoundingClientRect();
            const clientX = (e.targetTouches && e.targetTouches[0]) ? e.targetTouches[0].clientX : e.clientX;
            const clientY = (e.targetTouches && e.targetTouches[0]) ? e.targetTouches[0].clientY : e.clientY;

            const newX = clientX - containerRect.left - offsetX;
            const newY = clientY - containerRect.top - offsetY;

            velocityX = newX - parseFloat(activeElement.style.left || 0);
            velocityY = newY - parseFloat(activeElement.style.top || 0);

            activeElement.style.left = `${newX}px`;
            activeElement.style.top = `${newY}px`;
        }
    }

    function endDrag(e) {
        if (isDragging) {
            isDragging = false;

            if (activeElement) {
                activeElement.classList.remove('dragging');
                activeElement.classList.add('dropped');
                activeElement.addEventListener('animationend', function handleAnimationEnd() {
                    activeElement.classList.remove('dropped');
                    activeElement.removeEventListener('animationend', handleAnimationEnd);
                });
            }

            function applyMomentum() {
                if (!isDragging && activeElement) {
                    const container = document.getElementById(activeContainerId);
                    const containerRect = container.getBoundingClientRect();

                    let newX = parseFloat(activeElement.style.left || 0) + velocityX;
                    let newY = parseFloat(activeElement.style.top || 0) + velocityY;

                    velocityX *= friction;
                    velocityY *= friction;

                    newX = Math.max(0, Math.min(containerRect.width - activeElement.offsetWidth, newX));
                    newY = Math.max(0, Math.min(containerRect.height - activeElement.offsetHeight, newY));

                    activeElement.style.left = `${newX}px`;
                    activeElement.style.top = `${newY}px`;

                    if (Math.abs(velocityX) > 0.5 || Math.abs(velocityY) > 0.5) {
                        requestAnimationFrame(applyMomentum);
                    }
                }
            }
            applyMomentum();
        }
    }

    document.addEventListener('mousedown', startDrag, false);
    document.addEventListener('mousemove', onMove, false);
    document.addEventListener('mouseup', endDrag, false);
    document.addEventListener('touchstart', startDrag, {passive: false});
    document.addEventListener('touchmove', onMove, {passive: false});
    document.addEventListener('touchend', endDrag, false);

    document.querySelector(".toggle-button1").addEventListener("click", () => {
        document.getElementById("no1").style.display = "none";
        document.getElementById("no2").style.display = "block";
        activeContainerId = "container2";
        setupDraggable("container2");
    });

    document.querySelector(".toggle-button2").addEventListener("click", () => {
        document.getElementById("no2").style.display = "none";
        document.getElementById("no1").style.display = "block";
        activeContainerId = "container1";
        setupDraggable("container1");
    });

    const images = document.querySelectorAll('img[data-fullsrc]');
    const loadHighResImage = (img) => {
        const highResSrc = img.getAttribute('data-fullsrc');
        if (!highResSrc) return;
        const highResImg = new Image();
        highResImg.src = highResSrc;
        highResImg.onload = () => {
            img.src = highResSrc;
            img.classList.add('loaded');
        };
    };

    if ('IntersectionObserver' in window) {
        const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    loadHighResImage(img);
                    obs.unobserve(img);
                }
            });
        });

        images.forEach(img => {
            observer.observe(img);
        });
    } else {
        images.forEach(img => loadHighResImage(img));
    }
});
</script>

</body>
</html>
